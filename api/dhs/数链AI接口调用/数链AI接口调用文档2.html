<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="https://vuejs.press/images/hero.png"><title>数链AI接口调用文档2 | mydocs</title><meta name="description" content="这是我的第一个 VuePress 站点">
    <link rel="preload" href="/assets/style-BUEihmz2.css" as="style"><link rel="stylesheet" href="/assets/style-BUEihmz2.css">
    <link rel="modulepreload" href="/assets/app-keFXRlWq.js"><link rel="modulepreload" href="/assets/数链AI接口调用文档2.html-CVzj-n3o.js"><link rel="modulepreload" href="/assets/b3068a46a74a98cccdaa3c91bfb46888-CP7y00J1.js">
    <link rel="prefetch" href="/assets/index.html-Br-NU2zW.js" as="script"><link rel="prefetch" href="/assets/get-started.html-Oi66-jCl.js" as="script"><link rel="prefetch" href="/assets/index.html-xmgVCH-I.js" as="script"><link rel="prefetch" href="/assets/des加解密.html-BT9Xd-5c.js" as="script"><link rel="prefetch" href="/assets/message-push.html-DZQeto-y.js" as="script"><link rel="prefetch" href="/assets/vim键位映射.html-DVGD1Gwy.js" as="script"><link rel="prefetch" href="/assets/嵌入式聊天bot接入指南.html-CHZgW-cb.js" as="script"><link rel="prefetch" href="/assets/意图类接口统一返回格式.html-B_k7lywA.js" as="script"><link rel="prefetch" href="/assets/播报推送.html-wWR6gfGR.js" as="script"><link rel="prefetch" href="/assets/模板类智能体接口.html-B6_ec-wb.js" as="script"><link rel="prefetch" href="/assets/生态数智云小程序接口(新).html-Dh6wveGf.js" as="script"><link rel="prefetch" href="/assets/生态数智云小程序接口.html-DX2XdAFh.js" as="script"><link rel="prefetch" href="/assets/微信发送消息接口.html-CNYMpGdw.js" as="script"><link rel="prefetch" href="/assets/微信推送图片或文件.html-Bsh146j2.js" as="script"><link rel="prefetch" href="/assets/weather_intent接口.html-BEfoQngP.js" as="script"><link rel="prefetch" href="/assets/删除向量内容.html-DUSmwAc7.js" as="script"><link rel="prefetch" href="/assets/接口文档.html-D1Lkc1zu.js" as="script"><link rel="prefetch" href="/assets/数链AI接口调用文档.html-Dnnuxxhk.js" as="script"><link rel="prefetch" href="/assets/数链AI接口调用文档1.html-DT_Y795Y.js" as="script"><link rel="prefetch" href="/assets/新建笔记(20231010).html-C9tjLcTG.js" as="script"><link rel="prefetch" href="/assets/新建笔记(20231228).html-IH48Bak-.js" as="script"><link rel="prefetch" href="/assets/新建笔记(2024130).html-XtH0nPcj.js" as="script"><link rel="prefetch" href="/assets/根据关键词搜索知识库向量.html-BZ-3EAON.js" as="script"><link rel="prefetch" href="/assets/获取向量库数据接口.html-Cch9PDaE.js" as="script"><link rel="prefetch" href="/assets/PDF2WORD接口说明.html-ChDzDFbT.js" as="script"><link rel="prefetch" href="/assets/创建prompt接口.html-CK4yuSc3.js" as="script"><link rel="prefetch" href="/assets/对话接口.html-v3smXmjV.js" as="script"><link rel="prefetch" href="/assets/对话接口111.html-CX9pn9A3.js" as="script"><link rel="prefetch" href="/assets/摘要与标签接口说明.html-DAXzhblh.js" as="script"><link rel="prefetch" href="/assets/摘要生成接口说明.html-8d5MbifB.js" as="script"><link rel="prefetch" href="/assets/省厅自定义知识库知识.html-BVMm_Pqt.js" as="script"><link rel="prefetch" href="/assets/Speech.html-C__J-FaN.js" as="script"><link rel="prefetch" href="/assets/404.html-DtFs3Xsy.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="mydocs"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">mydocs</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/api/" aria-label="接口文档"><!---->接口文档<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style="display:none;"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style=""><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/api/" aria-label="接口文档"><!---->接口文档<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">李鹏达 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/lpd/message-push.html" aria-label="微信消息推送接口文档 v1.0.0"><!---->微信消息推送接口文档 v1.0.0<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/lpd/%E6%84%8F%E5%9B%BE%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E6%A0%BC%E5%BC%8F.html" aria-label="意图类接口统一返回格式 v1.0.0"><!---->意图类接口统一返回格式 v1.0.0<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/lpd/des%E5%8A%A0%E8%A7%A3%E5%AF%86.html" aria-label="DES 加解密接口文档 v1.0.0"><!---->DES 加解密接口文档 v1.0.0<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/lpd/%E6%A8%A1%E6%9D%BF%E7%B1%BB%E6%99%BA%E8%83%BD%E4%BD%93%E6%8E%A5%E5%8F%A3.html" aria-label="模板类智能体接口"><!---->模板类智能体接口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/lpd/%E7%94%9F%E6%80%81%E6%95%B0%E6%99%BA%E4%BA%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3(%E6%96%B0).html" aria-label="生态数智云小程序接口 v1.0.1"><!---->生态数智云小程序接口 v1.0.1<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/lpd/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%81%8A%E5%A4%A9bot%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97.html" aria-label="网页嵌入式 Bot 接入指南"><!---->网页嵌入式 Bot 接入指南<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/lpd/%E6%92%AD%E6%8A%A5%E6%8E%A8%E9%80%81.html" aria-label="播报推送"><!---->播报推送<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/lpd/%E7%94%9F%E6%80%81%E6%95%B0%E6%99%BA%E4%BA%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3.html" aria-label="生态数智云小程序接口 V2.0 (2025.03.03)"><!---->生态数智云小程序接口 V2.0 (2025.03.03)<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">段浩松 <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">省厅大模型 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E7%9C%81%E5%8E%85%E5%A4%A7%E6%A8%A1%E5%9E%8B/PDF2WORD%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E.html" aria-label="PDF2WORD接口说明.md"><!---->PDF2WORD接口说明.md<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E7%9C%81%E5%8E%85%E5%A4%A7%E6%A8%A1%E5%9E%8B/%E5%88%9B%E5%BB%BAprompt%E6%8E%A5%E5%8F%A3.html" aria-label="创建prompt接口"><!---->创建prompt接口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/省厅大模型/模板类智能体接口.html" aria-label="/api/dhs/省厅大模型/模板类智能体接口.html"><!---->/api/dhs/省厅大模型/模板类智能体接口.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E7%9C%81%E5%8E%85%E5%A4%A7%E6%A8%A1%E5%9E%8B/%E5%AF%B9%E8%AF%9D%E6%8E%A5%E5%8F%A3111.html" aria-label="对话接口111.md"><!---->对话接口111.md<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E7%9C%81%E5%8E%85%E5%A4%A7%E6%A8%A1%E5%9E%8B/%E6%91%98%E8%A6%81%E4%B8%8E%E6%A0%87%E7%AD%BE%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E.html" aria-label="摘要生成接口说明"><!---->摘要生成接口说明<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E7%9C%81%E5%8E%85%E5%A4%A7%E6%A8%A1%E5%9E%8B/%E6%91%98%E8%A6%81%E7%94%9F%E6%88%90%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E.html" aria-label="摘要生成接口说明"><!---->摘要生成接口说明<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E7%9C%81%E5%8E%85%E5%A4%A7%E6%A8%A1%E5%9E%8B/%E7%9C%81%E5%8E%85%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9F%A5%E8%AF%86%E5%BA%93%E7%9F%A5%E8%AF%86.html" aria-label="省厅自定义知识库知识"><!---->省厅自定义知识库知识<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item active collapsible">数链AI接口调用 <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/weather_intent%E6%8E%A5%E5%8F%A3.html" aria-label="weather_intent接口"><!---->weather_intent接口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E5%88%A0%E9%99%A4%E5%90%91%E9%87%8F%E5%86%85%E5%AE%B9.html" aria-label="删除向量内容"><!---->删除向量内容<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3.html" aria-label="接口文档"><!---->接口文档<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E6%96%87%E6%A1%A3.html" aria-label="数链AI接口调用文档"><!---->数链AI接口调用文档<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E6%96%87%E6%A1%A31.html" aria-label="数链AI接口调用文档1"><!---->数链AI接口调用文档1<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E6%96%87%E6%A1%A32.html" aria-label="数链AI接口调用文档2"><!---->数链AI接口调用文档2<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E6%96%B0%E5%BB%BA%E7%AC%94%E8%AE%B0(2024130).html" aria-label="新建笔记(2024130)"><!---->新建笔记(2024130)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E6%96%B0%E5%BB%BA%E7%AC%94%E8%AE%B0(20231010).html" aria-label="新建笔记(20231010)"><!---->新建笔记(20231010)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E6%96%B0%E5%BB%BA%E7%AC%94%E8%AE%B0(20231228).html" aria-label="新建笔记(20231228)"><!---->新建笔记(20231228)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E6%A0%B9%E6%8D%AE%E5%85%B3%E9%94%AE%E8%AF%8D%E6%90%9C%E7%B4%A2%E7%9F%A5%E8%AF%86%E5%BA%93%E5%90%91%E9%87%8F.html" aria-label="根据关键词搜索知识库向量"><!---->根据关键词搜索知识库向量<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E8%8E%B7%E5%8F%96%E5%90%91%E9%87%8F%E5%BA%93%E6%95%B0%E6%8D%AE%E6%8E%A5%E5%8F%A3.html" aria-label="获取向量库数据接口.md"><!---->获取向量库数据接口.md<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">微信消息推送 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81/%E5%BE%AE%E4%BF%A1%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%E6%8E%A5%E5%8F%A3.html" aria-label="微信发送消息接口"><!---->微信发送消息接口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81/%E5%BE%AE%E4%BF%A1%E6%8E%A8%E9%80%81%E5%9B%BE%E7%89%87%E6%88%96%E6%96%87%E4%BB%B6.html" aria-label="微信推送图片或文件"><!---->微信推送图片或文件<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">语音相关 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/api/dhs/%E8%AF%AD%E9%9F%B3%E7%9B%B8%E5%85%B3/Speech.html" aria-label="语音合成接口文档"><!---->语音合成接口文档<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="数链ai接口调用文档2" tabindex="-1"><a class="header-anchor" href="#数链ai接口调用文档2"><span>数链AI接口调用文档2</span></a></h1><p>1、流式对话接口</p><p><strong>正式接口URL</strong>：<a href="http://116.204.85.243:8000/stream" target="_blank" rel="noopener noreferrer">http://116.204.85.243:8000/stream</a></p><p><strong>测试接口URL</strong>： <a href="http://116.204.85.243:8080/stream" target="_blank" rel="noopener noreferrer">http://116.204.85.243:8080/stream</a></p><p><em><strong><u>==先用测试接口，后续调试成功改为正式接口==</u></strong></em></p><p><strong>请求方式</strong>：POST</p><p><strong>请求示例</strong>：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">{</span>
<span class="line">  &quot;query&quot;:&quot;你是谁&quot;,</span>
<span class="line">  &quot;history&quot;:[[&quot;你好&quot;, &quot;你好！我是数链生态 AI 小助手，由河北先进环保产业创新中心有限公司研发而成，专注于生态环境领域知识分享，为用户提供一站式的知识问答、数据解析、专家问诊、经验分享！请问有什么我可以帮助您的吗？&quot;]]</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>参数说明</strong>：</p><table><thead><tr><th>参数值</th><th>示例值</th><th>参数类型</th><th>是否必填</th><th>参数描述</th></tr></thead><tbody><tr><td>query</td><td>&quot;你是谁&quot;</td><td>字符串</td><td>是</td><td>对话内容、问题</td></tr><tr><td>history</td><td>[[&quot;你好&quot;, &quot;你好！......&quot;]]</td><td>列表</td><td>是</td><td>对话历史记录</td></tr></tbody></table><p><u>****注：history可为空，为对话历史记录。每次对话会返回用户传入的历史记录和最新的聊天记录，如果需要传入历史记录，可直接提取对话返回的列表，设置传入聊天历史的条数作为历史记录参数。 ***</u></p><p><strong>成功响应示例</strong>：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;你&quot;, &quot;response&quot;: &quot;你&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;好&quot;, &quot;response&quot;: &quot;你好&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;！&quot;, &quot;response&quot;: &quot;你好！&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">            .</span>
<span class="line">            .</span>
<span class="line">            .</span>
<span class="line">            </span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;&quot;, &quot;response&quot;: &quot;你好！我是数链生态 AI 小助手，由河北先进环保产业创新中心有限公司研发而成，专注于生态环境领域知识分享，为用户提供一站式的知识问答、数据解析、专家问诊、经验分享！请问有什么我可以帮助您的吗？&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;query&quot;: &quot;你好&quot;, &quot;delta&quot;: &quot;[EOS]&quot;, &quot;response&quot;: &quot;你好！我是数链生态 AI 小助手，由河北先进环保产业创新中心有限公司研发而成，专注于生态环境领域知识分享，为用户提供一站式的知识问答、数据解析、专家问诊、经验分享！请问有什么我可以帮助您的吗？&quot;, &quot;history&quot;: [[&quot;你好&quot;, &quot;你好！我是数链生态 AI 小助手，由河北先进环保产业创新中心有限公司研发而成，专注于生态环境领域知识分享，为用户提供一站式的知识问答、数据解析、专家问诊、经验分享！请问有什么我可以帮助您的吗？&quot;]], &quot;finished&quot;: true}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>参数说明</strong>：</p><table><thead><tr><th>参数值</th><th>内容说明</th></tr></thead><tbody><tr><td>event</td><td>sse协议中每触发一次事件会生成一个evnet，不可更改</td></tr><tr><td>data</td><td>每次事件返回的结果</td></tr><tr><td>delta</td><td>每次事件返回一个短字符串，流式接口读取该字符串用于前端展示；<br>如果返回[EOS]表示内容结束标志。</td></tr><tr><td>response</td><td>每次事件产生后返回的总内容</td></tr><tr><td>query</td><td>表示用户对话内容或问题</td></tr><tr><td>history</td><td>表示本次对话的历史记录，<br>如果用户传入参数中有history，会一并返回给用户</td></tr><tr><td>finished</td><td>流式接口结束标志，false表示没有结束，true表示本次对话结束。</td></tr></tbody></table><h2 id="_2、本地知识库流式对话接口" tabindex="-1"><a class="header-anchor" href="#_2、本地知识库流式对话接口"><span>2、本地知识库流式对话接口</span></a></h2><p><strong>正式接口URL</strong>：<a href="http://116.204.85.243:8000/local_doc_stream" target="_blank" rel="noopener noreferrer">http://116.204.85.243:8000/local_doc_stream</a></p><p><strong>测试接口URL</strong>：<a href="http://116.204.85.243:8080/local_doc_stream" target="_blank" rel="noopener noreferrer">http://116.204.85.243:8080/local_doc_stream</a></p><p><em><strong><u>==先用测试接口，后续调试成功改为正式接口==</u></strong></em></p><p><strong>请求方式</strong>：POST</p><p><strong>请求示例</strong>：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">{</span>
<span class="line">  &quot;query&quot;:&quot;雾炮机可以将空气中的微小颗粒浓度降低吗&quot;,</span>
<span class="line">  &quot;history&quot;:[[&quot;你好&quot;, &quot;你好！我是数链生态 AI 小助手，由河北先进环保产业创新中心有限公司研发而成，专注于生态环境领域知识分享，为用户提供一站式的知识问答、数据解析、专家问诊、经验分享！请问有什么我可以帮助您的吗？&quot;]]</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>参数说明</strong>：</p><table><thead><tr><th>参数值</th><th>示例值</th><th>参数类型</th><th>是否必填</th><th>参数描述</th></tr></thead><tbody><tr><td>query</td><td>&quot;雾炮机可以将空气中<br>的微小颗粒浓度降低吗&quot;</td><td>字符串</td><td>是</td><td>对话内容、问题</td></tr><tr><td>history</td><td>[[&quot;你好&quot;, &quot;你好！......&quot;]]</td><td>列表</td><td>是</td><td>对话历史记录</td></tr></tbody></table><p><u>****注：history可为空，为对话历史记录。每次对话会返回用户传入的历史记录和最新的聊天记录，如果需要传入历史记录，可直接提取对话返回的列表，设置传入聊天历史的条数作为历史记录参数。 ***</u></p><p><strong>成功响应示例</strong>：</p><p>==①如果匹配到本地知识库内容==</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">resp_idevent: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;根据&quot;, &quot;response&quot;: &quot;根据&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;已知&quot;, &quot;response&quot;: &quot;根据已知&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;信息&quot;, &quot;response&quot;: &quot;根据已知信息&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">            .</span>
<span class="line">            .</span>
<span class="line">            .</span>
<span class="line">            </span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;&quot;, &quot;response&quot;: &quot;根据已知信息,雾炮可以将空气中的微小颗粒浓度降低15%左右。&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;query&quot;: &quot;雾炮机可以将空气中的微小颗粒浓度降低吗&quot;, &quot;delta&quot;: &quot;[EOS]&quot;, &quot;response&quot;: &quot;根据已知信息,雾炮可以将空气中的微小颗粒浓度降低15%左右。&quot;, &quot;history&quot;: [[&quot;雾炮机可以将空气中的微小颗粒浓度降低吗&quot;, &quot;根据已知信息,雾炮可以将空气中的微小颗粒浓度降低15%左右。&quot;]], &quot;finished&quot;: true, &quot;resp_content&quot;: [{&quot;id&quot;: &quot;lk_2&quot;, &quot;content&quot;: &quot;“雾炮”可以将空气中的微小颗粒浓度降低15%左右&quot;,&quot;que_title&quot;:&quot;“雾炮”能将空气中的微小颗粒浓度降低到多少&quot;}], &quot;source_documents&quot;: true}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>==②如果没有匹配到本地知识库内容==</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;你&quot;, &quot;response&quot;: &quot;你&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;好&quot;, &quot;response&quot;: &quot;你好&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;！&quot;, &quot;response&quot;: &quot;你好！&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">            .</span>
<span class="line">            .</span>
<span class="line">            .</span>
<span class="line">            </span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;delta&quot;: &quot;&quot;, &quot;response&quot;: &quot;你好！我是数链生态 AI 小助手，由河北先进环保产业创新中心有限公司研发而成，专注于生态环境领域知识分享，为用户提供一站式的知识问答、数据解析、专家问诊、经验分享！请问有什么我可以帮助您的吗？&quot;, &quot;finished&quot;: false}</span>
<span class="line"></span>
<span class="line">event: delta</span>
<span class="line">data: {&quot;query&quot;: &quot;你好&quot;, &quot;delta&quot;: &quot;[EOS]&quot;, &quot;response&quot;: &quot;你好！我是数链生态 AI 小助手，由河北先进环保产业创新中心有限公司研发而成，专注于生态环境领域知识分享，为用户提供一站式的知识问答、数据解析、专家问诊、经验分享！请问有什么我可以帮助您的吗？&quot;, &quot;history&quot;: [[&quot;你好&quot;, &quot;你好！我是数链生态 AI 小助手，由河北先进环保产业创新中心有限公司研发而成，专注于生态环境领域知识分享，为用户提供一站式的知识问答、数据解析、专家问诊、经验分享！请问有什么我可以帮助您的吗？&quot;]], &quot;finished&quot;: true, &quot;source_documents&quot;: false}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>参数说明</strong>：</p><br><table><thead><tr><th>参数值</th><th>内容说明</th></tr></thead><tbody><tr><td>event</td><td>sse协议中每触发一次事件会生成一个evnet，<br>不可更改</td></tr><tr><td>data</td><td>每次事件返回的结果</td></tr><tr><td>delta</td><td>每次事件返回一个短字符串，<br>流式接口读取该字符串用于前端展示；<br>如果返回[EOS]表示内容结束标志。</td></tr><tr><td>response</td><td>每次事件产生后返回的总内容</td></tr><tr><td>query</td><td>表示用户对话内容或问题</td></tr><tr><td>history</td><td>表示本次对话的历史记录，<br>如果用户传入参数中有history，会一并返回给用户</td></tr><tr><td>finished</td><td>流式接口结束标志，<br>false表示没有结束，<br>true表示本次对话结束。</td></tr><tr><td>source_documents</td><td>是否匹配到本地知识库标识，<br>如果匹配到为true，<br>如果没有匹配到为false</td></tr><tr><td>resp_content</td><td>如果匹配到本地知识库内容，<br>则会返回所匹配内容的id和内容，<br>如果没有匹配到，则没有该参数<br>注意：<br>id表示所匹配的id，<br>content表示所匹配的内容；<br>que_title表示所匹配内容的标题<br>返回格式为列表形式，<br>列表中存放id、que_title和content字典，<br>目前列表中只存储一条匹配度最高的字典</td></tr></tbody></table><h2 id="_3、要求" tabindex="-1"><a class="header-anchor" href="#_3、要求"><span>3、要求</span></a></h2><p>① 根据账号信息部分用户调用流式对话接口，部分用户调用本地知识库流式对话接口；</p><p>② 将历史聊天记录加入到对话中，可自行定制传输几条历史聊天记录；</p><p>③ 使用本地知识库流式对话接口时，如果返回匹配到本地知识库，则将在聊天末尾添加信息来源，效果如下：</p><img src="/assets/b3068a46a74a98cccdaa3c91bfb46888-B-oEO0B7.png" alt="screen-capture" style="zoom:50%;"><hr><p>注意：目前如果匹配到知识库内容只返回一条匹配度最高的信息来源，所返回结果为列表，方便后续添加多条匹配内容；请根据返回id自行查询问题，点击来源链接可跳转到所匹配的内容</p><hr></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 47816635+Xpiper@users.noreply.github.com">apiper</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E6%96%87%E6%A1%A31.html" aria-label="数链AI接口调用文档1"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>数链AI接口调用文档1</span></div></a><a class="route-link auto-link next" href="/api/dhs/%E6%95%B0%E9%93%BEAI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8/%E6%96%B0%E5%BB%BA%E7%AC%94%E8%AE%B0(2024130).html" aria-label="新建笔记(2024130)"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>新建笔记(2024130)</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-keFXRlWq.js" defer></script>
  </body>
</html>
